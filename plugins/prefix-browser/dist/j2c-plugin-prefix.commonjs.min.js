"use strict";function camelCase(e){return e.replace(/-([a-z])/g,function(e,r){return r.toUpperCase()}).replace("-","")}function deCamelCase(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})}function supported$1(e,r){return style$1[r]="",style$1[r]=e,!!style$1[r]}function supported$2(e){return style$2.textContent=e+"{}",!!style$2.sheet.cssRules.length}function setify(e){var r={};return e.forEach(function(e){r[e]=!0}),r}function makeDetector(e,r,t){return new RegExp(e+"(?:"+r.join("|")+")"+t)}function makeLexer(e,r,t){new RegExp("\"(?:\\\\[\\S\\s]|[^\"])*\"|'(?:\\\\[\\S\\s]|[^'])*'|\\/\\*[\\S\\s]*?\\*\\/|"+e+"((?:"+r.join("|")+")"+t+")","gi")}function replacer(e,r,t){return r?r+prefix+t:e}function fixValue(e,r){return convertGradients&&gradientDetector.test(e)&&(e=e.replace(gradientMatcher,gradientReplacer)),convertFunctions&&functionsDetector.test(e)&&(e=e.replace(functionsMatcher,replacer)),convertKeywords&&keywordsDetector.test(e)&&(e=e.replace(keywordsMatcher,replacer)),convertProperties&&own.call(valueProperties,r)&&valuePropertiesDetector.test(e)&&(e=e.replace(valuePropertiesMatcher,valuePropertiesReplacer)),e}function prefixPlugin(){return window.addEventListener?{$filter:function(e){var r=[];return{i:function(){e.i(),r.length=0},a:function(t,s,n){t=own.call(atRulesSet,t)?t.replace(atRulesMatcher,atRulesReplacer):t,n&&r.push(t),e.a(t,s,n)},A:function(){e.A(r.pop())},d:function(r,t){e.d(own.call(propertiesSet,r)?prefix+r:r,fixValue(t,r))},s:function(r){selectorMatcher.test(r)&&(r=r.replace(selectorMatcher,selectorReplacer)),e.s(r)}}}}:void 0}var self$1={prefixSelector:function(e){return e.replace(/^::?/,function(e){return e+self.prefix})}},root=document.documentElement,prefixes={},properties=[],style=getComputedStyle(document.documentElement,null),dummy=document.createElement("div").style,iterate=function(e){if("-"===e.charAt(0)){properties.push(e);var r=e.split("-"),t=r[1];for(prefixes[t]=++prefixes[t]||1;r.length>3;){r.pop();var s=r.join("-");supported(s)&&-1===properties.indexOf(s)&&properties.push(s)}}},supported=function(e){return camelCase(e)in dummy};if(style&&style.length>0)for(var i=0;i<style.length;i++)iterate(style[i]);else for(var property in style)iterate(deCamelCase(property));var highest={uses:0};for(var prefix$1 in prefixes){var uses=prefixes[prefix$1];highest.uses<uses&&(highest={prefix:prefix$1,uses:uses})}self$1.prefix="-"+highest.prefix+"-",self$1.Prefix=camelCase(self$1.prefix),self$1.properties=[];for(var i=0;i<properties.length;i++){var property=properties[i];if(0===property.indexOf(self$1.prefix)){var unprefixed=property.slice(self$1.prefix.length);supported(unprefixed)||self$1.properties.push(unprefixed)}}"Ms"!=self$1.Prefix||"transform"in dummy||"MsTransform"in dummy||!("msTransform"in dummy)||self$1.properties.push("transform","transform-origin"),self$1.properties.sort();var functions={"linear-gradient":{property:"backgroundImage",params:"red, teal"},calc:{property:"width",params:"1px + 5%"},element:{property:"backgroundImage",params:"#foo"},"cross-fade":{property:"backgroundImage",params:"url(a.png), url(b.png), 50%"}};functions["repeating-linear-gradient"]=functions["repeating-radial-gradient"]=functions["radial-gradient"]=functions["linear-gradient"];var keywords={initial:"color","zoom-in":"cursor","zoom-out":"cursor",box:"display",flexbox:"display","inline-flexbox":"display",flex:"display","inline-flex":"display",grid:"display","inline-grid":"display","max-content":"width","min-content":"width","fit-content":"width","fill-available":"width"};self$1.functions=[],self$1.keywords=[];var style$1=document.createElement("div").style;for(var func in functions){var test=functions[func],property=test.property,value=func+"("+test.params+")";!supported$1(value,property)&&supported$1(self$1.prefix+value,property)&&self$1.functions.push(func)}for(var keyword in keywords){var property$1=keywords[keyword];!supported$1(keyword,property$1)&&supported$1(self$1.prefix+keyword,property$1)&&self$1.keywords.push(keyword)}var selectors={":read-only":null,":read-write":null,":any-link":null,"::selection":null},atrules={keyframes:"name",viewport:null,document:'regexp(".")'};self$1.selectors=[],self$1.atrules=[];var style$2=root.appendChild(document.createElement("style"));for(var selector in selectors){var test=selector+(selectors[selector]?"("+selectors[selector]+")":"");!supported$2(test)&&supported$2(self$1.prefixSelector(test))&&self$1.selectors.push(selector)}for(var atrule in atrules){var test$1=atrule+" "+(atrules[atrule]||"");!supported$2("@"+test$1)&&supported$2("@"+self$1.prefix+test$1)&&self$1.atrules.push(atrule)}root.removeChild(style$2),self$1.valueProperties=["transition","transition-property","will-change"],root.className+=" "+self$1.prefix;var own={}.hasOwnProperty,prefix=self$1.prefix,replacerString="$&"+prefix,atRulesSet=setify(self$1.atrules.map(function(e){return"@"+e})),atRulesMatcher=new RegExp("^@("+self$1.atrules.join("|")+")\\b"),atRulesReplacer="@"+prefix+"$1",selectorMatcher=makeLexer("\\b(",self$1.selectors,")\\b"),selectorReplacer=makeReplacer(/^::?/,replacerString),propertiesSet=setify(self$1.properties),valueProperties={transition:1,"transition-property":1},convertGradients=self$1.functions.indexOf("linear-gradient")>-1,gradientDetector=/\blinear-gradient\(/,gradientMatcher=/(^|\s|,)(repeating-)?linear-gradient\(\s*(-?\d*\.?\d*)deg/gi,gradientReplacer=function(e,r,t,s){return r+prefix+(t||"")+"linear-gradient("+(90-s)+"deg"};convertGradients&&self$1["function"].splice(self$1.functions.indexOf("linear-gradient")),self$1.functions.indexOf("repeating-linear-gradient")>-1&&self$1["function"].splice(self$1.functions.indexOf("repeating-linear-gradient"));var convertFunctions=!!self$1.functions.length,functionsDetector=makeDetector("(?:^|\\s|,)",self$1.fuctions,"\\s*\\("),functionsMatcher=makeLexer("(^|\\s|,)",self$1.fuctions,"\\s*\\("),convertKeywords=!!self$1.keywords.length,keywordsDetector=makeDetector("(?:^|\\s)",self$1.keywords,"(?:\\s|$)"),keywordsMatcher=makeLexer("(^|\\s)",self$1.keywords,"(?:\\s|$)"),convertProperties=!!self$1.properties.length,valuePropertiesDetector=makeDetector("(?:^|\\s|,)",self$1.properties,"(?:$|\\s|,)"),valuePropertiesMatcher=new RegExp("(^|\\s|,)((?:"+self$1.properties.join("|")+")(?:$|\\s|,))","gi"),valuePropertiesReplacer="$1"+self$1.prefix+"$2";module.exports=prefixPlugin;